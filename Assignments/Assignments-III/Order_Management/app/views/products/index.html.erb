<script>
  $(document).ready(function(){
      $('.search').on('keyup',function(){
          var searchTerm = $(this).val().toLowerCase();
          $('#productTbl tbody tr').each(function(){
              var lineStr = $(this).text().toLowerCase();
              if(lineStr.indexOf(searchTerm) === -1){
                  $(this).hide();
              }else{
                  $(this).show();
              }
          });
      });
  });
</script>
<p id="notice"><%= notice %></p>


<h1>Products</h1>
<%= link_to 'New Product', new_product_path, class: "btn btn-success btn-sm" %>
<div class="form-group pull-right">
    <input type="text" class="search form-control" placeholder="Search products">
</div>
<table id="productTbl" class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Image</th>
      <th>Name</th>
      <th>Sku</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Weight</th>
      <th>Width</th>
      <th>Height</th>
      <th>Depth</th>
      <th colspan="3">Action</th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= image_tag(product.image_url(:thumb).to_s) %></td>
        <td><%= product.name %></td>
        <td><%= product.sku %></td>
        <td><%= product.price %></td>
        <td><%= product.quantity %></td>
        <td><%= product.weight %></td>
        <td><%= product.width %></td>
        <td><%= product.height %></td>
        <td><%= product.depth %></td>
        <td><%= link_to content_tag(:span, "",:class => "glyphicon glyphicon-zoom-in"), product %></td>
        <td><%= link_to content_tag(:span, "",:class => "glyphicon glyphicon-pencil", :style =>"color:blue"), edit_product_path(product) %></td>
        <td><%= link_to content_tag(:span, "",:class => "glyphicon glyphicon-trash", :style =>"color:red"), product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>


